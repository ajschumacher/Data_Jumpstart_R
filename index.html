<!DOCTYPE html>
<html>
<head>
  <title>Data Jumpstart : R</title>
  <meta charset="utf-8">
  <meta name="description" content="Data Jumpstart : R">
  <meta name="author" content="Aaron Schumacher : aaron.schumacher@nyu.edu : @planarrowspace">
  <meta name="generator" content="slidify" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/default.css" media="all" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/phone.css" 
    media="only screen and (max-device-width: 480px)" >
  <link rel="stylesheet" href="libraries/frameworks/io2012/css/slidify.css" >
  <link rel="stylesheet" href="libraries/highlighters/highlight.js/css/tomorrow.css" />
  <base target="_blank"> <!-- This amazingness opens all links in a new tab. -->
  <script data-main="libraries/frameworks/io2012/js/slides" 
    src="libraries/frameworks/io2012/js/require-1.0.8.min.js">
  </script>
  
    <link rel="stylesheet" href = "assets/css/ribbons.css">

</head>
<body style="opacity: 0">
  <slides class="layout-widescreen">
    
    <!-- LOGO SLIDE -->
    <slide class="nobackground">
      <article class="flexbox vcenter">
        <span>
          <img width='400px' src="assets/img/data_services_logo.png">
        </span>
      </article>
    </slide>
    <!-- END LOGO SLIDE -->
    

    <!-- TITLE SLIDE -->
    <!-- Should I move this to a Local Layout File? -->
    <slide class="title-slide segue nobackground">
      <hgroup class="auto-fadein">
        <h1>Data Jumpstart : R</h1>
        <h2>bit.ly/NYUjumpstartR : #NYUjumpstartR</h2>
        <p>Aaron Schumacher : aaron.schumacher@nyu.edu : @planarrowspace<br/>Senior Data Services Specialist : NYU Data Services</p>
      </hgroup>
      <a href="https://github.com/ajschumacher/Data_Jumpstart_R/zipball/gh-pages" class="example">
        Download
      </a>
      
      <footer class = 'license'>
        <a href='http://creativecommons.org/licenses/by-nc-sa/3.0/'>
        <img width = '80px' src = 'http://mirrors.creativecommons.org/presskit/buttons/88x31/png/by-nc-sa.png'>
        </a>
      </footer>
    </slide>

    <!-- SLIDES -->
      <slide class="" id="slide-1" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://hbr.org/2012/10/data-scientist-the-sexiest-job-of-the-21st-century/'>
  <img src='assets/img/sexy.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-2" style="background:;">
  <hgroup>
    <h2>Classwork</h2>
  </hgroup>
  <article>
    <p>If you haven&#39;t yet, join these sites:</p>

<ul>
<li><a href="http://www.meetup.com/">meetup</a></li>
<li><a href="https://github.com/">github</a></li>
<li><a href="http://www.kaggle.com/">kaggle</a></li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-3" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://www.meetup.com/'>
  <img src='assets/img/meetup.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-4" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='https://github.com/'>
  <img src='assets/img/github.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-5" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://www.kaggle.com/'>
  <img src='assets/img/kaggle.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-6" style="background:;">
  <hgroup>
    <h2>Homework</h2>
  </hgroup>
  <article>
    <p>If you haven&#39;t yet, do these cool things:</p>

<ul>
<li>Participate in a good tech meetup.</li>
<li>Learn git and use github for a project.</li>
<li>Enter a kaggle competition.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-7" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://www.meetup.com/how-to-javascript/events/97065712/'>
  <img src='assets/img/meetup-html5.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-8" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://try.github.com/'>
  <img src='assets/img/github-try.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-9" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://www.kaggle.com/c/digit-recognizer/prospector#76'>
  <img src='assets/img/kaggle-digit.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-10" style="background:;">
  <hgroup>
    
  </hgroup>
  <article>
    <p><center>
 <a style='border-bottom:none;' href='http://datascience.nyu.edu/yann-lecun-and-john-langford-co-teaching-new-course-large-scale-machine-learning-and-big-data/'>
  <img src='assets/img/nyuDS.png' height='600px' />
 </a>
</center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-11" style="background:;">
  <hgroup>
    <h2><a href="http://bit.ly/nyudataservices">NYU Data Services</a></h2>
  </hgroup>
  <article>
    
<div style='float:left;width:48%;' class='centered'>
  <ul>
<li><a href="http://nyu.libguides.com/content.php?pid=38898&amp;sid=1496756">Computer lab, Bobst 5</a></li>
<li><a href="http://bit.ly/datatutorials">Workshops/Tutorials</a></li>
<li><a href="http://bit.ly/datameeting">Individual consultations</a></li>
</ul>


</div>
<div style='float:right;width:48%;'>
  <ul>
<li>ArcGIS</li>
<li>Google Earth</li>
<li>SPSS</li>
<li>Stata</li>
<li>SAS</li>
<li>R</li>
<li>MATLAB</li>
<li>ATLAS.ti</li>
<li>Qualtrics Surveys</li>
<li>High Performance Computing</li>
<li>Data Finding</li>
<li>Data Management Planning</li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-12" style="background:;">
  <hgroup>
    <h2>Intermediate Topics in R</h2>
  </hgroup>
  <article>
    
<div style='float:left;width:48%;' class='centered'>
  <ul>
<li>Formulas in R (for models, plots, ...)</li>
<li>Working with (model) objects (lm, glm, ...)</li>
<li>Programming: functions</li>
<li>Programming: flow control (if, for, while, ...)</li>
<li>Data set manipulation (merge, wide/long, ...)</li>
<li>Munging strings, dates, etc.</li>
<li>SQL in R (select * from ...)</li>
<li>2-D plotting (base, lattice, ggplot2)</li>
<li>Network (graph) visualization</li>
<li>PCA / clustering / 3-D plotting</li>
</ul>


</div>
<div style='float:right;width:48%;'>
  <ul>
<li>Please ask questions!</li>
<li>Please fill out our <a href="http://bit.ly/NYUtopicRsurvey">survey</a> afterward!</li>
</ul>

</div>
  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-13" style="background:;">
  <hgroup>
    <h2>Data set: <code>iris</code></h2>
  </hgroup>
  <article>
    <pre><code class="r">data(iris)  #  Load included data set into your workspace.
str(iris)   #  Display structure of data set.
</code></pre>

<pre><code>## &#39;data.frame&#39;:    150 obs. of  5 variables:
##  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
##  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
##  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
##  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
##  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-14" style="background:;">
  <hgroup>
    <h2>Presentation code:</h2>
  </hgroup>
  <article>
    <iframe src="index.txt" height=600px /></iframe>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-15" style="background:;">
  <hgroup>
    <h2>Formulas in R</h2>
  </hgroup>
  <article>
    <p>Formula notation featuring &#39;<code>~</code>&#39; is used in various forms across much of R:</p>

<ul>
<li>Defining models</li>
</ul>

<pre><code class="r">lm(Sepal.Length ~ Species, data = iris)
</code></pre>

<ul>
<li>Aggregating / reshaping data</li>
</ul>

<pre><code class="r">aggregate(Sepal.Length ~ Species, data = iris, FUN = mean)
</code></pre>

<ul>
<li>Plotting</li>
</ul>

<pre><code class="r">boxplot(Sepal.Length ~ Species, data = iris)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-16" style="background:;">
  <hgroup>
    <h2>Formulas in R</h2>
  </hgroup>
  <article>
    <p>This model is based on a categorical variable, an interaction, the log of a variable, and zero intercept:</p>

<pre><code class="r">lm(Sepal.Length ~ Species + Species:Petal.Length + log(Petal.Width) - 1, data=iris)
?formula  #  More help for model formulas.
</code></pre>

<p>Use &#39;<code>.</code>&#39; to select all otherwise unused variables in a data frame:</p>

<pre><code class="r">aggregate(. ~ Species, data = iris, FUN = mean)
</code></pre>

<p>In <code>lattice</code> the bar (&#39;<code>|</code>&#39;) introduces small multiples conditioned on what follows:</p>

<pre><code class="r">library(lattice)
xyplot(Sepal.Length ~ Sepal.Width | Species, data = iris)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-17" style="background:;">
  <hgroup>
    <h2>Working with (model) objects</h2>
  </hgroup>
  <article>
    <p>R functions often return some sort of &#39;results object&#39; which you can continue to work with.</p>

<p>This is the case for model objects:</p>

<pre><code class="r">my.model &lt;- lm(Sepal.Length ~ . * ., data = iris)  # Create an abominable model.
</code></pre>

<p>The model object contains lots of things, which you can look at this way but likely won&#39;t:</p>

<pre><code class="r">str(my.model)  # View the complete structure of the model object.
</code></pre>

<p>(<code>str</code>, like many R functions, is generic - it works on many types of objects.)</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-18" style="background:;">
  <hgroup>
    <h2>Working with (model) objects</h2>
  </hgroup>
  <article>
    <p>Often instead of doing things like this:</p>

<pre><code class="r">cor(my.model$fitted.values, my.model$model$Sepal.Length)^2
</code></pre>

<p>you can use generic functions like these:</p>

<pre><code class="r">my.model  #  This is equivalent to print(my.model)
summary(my.model)
deviance(my.model)
residuals(my.model)
plot(my.model)
coef(my.model)
confint(my.model)
vcov(my.model)
predict(my.model,
        data.frame(Sepal.Width=10, Petal.Length=10, Petal.Width=10, Species=&#39;setosa&#39;))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-19" style="background:;">
  <hgroup>
    <h2>Programming: functions</h2>
  </hgroup>
  <article>
    <p>Functions are objects. You can make your own like this:</p>

<pre><code class="r">times.four &lt;- function(formal.argument) {
    four &lt;- 4
    return(formal.argument * four)
}

times.four(7)
</code></pre>

<pre><code>## [1] 28
</code></pre>

<pre><code class="r">print(four)  #  Only exists inside the function.
</code></pre>

<pre><code>## Error: object &#39;four&#39; not found
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-20" style="background:;">
  <hgroup>
    <h2>Programming: functions</h2>
  </hgroup>
  <article>
    <p>Anonymous functions are also frequently useful. Compare these:</p>

<pre><code class="r">aggregate(. ~ Species, data=iris, FUN=max)
</code></pre>

<pre><code>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     setosa          5.8         4.4          1.9         0.6
## 2 versicolor          7.0         3.4          5.1         1.8
## 3  virginica          7.9         3.8          6.9         2.5
</code></pre>

<pre><code class="r">aggregate(. ~ Species, data=iris, FUN=function(x) { return(max(x) - 1) } )
</code></pre>

<pre><code>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     setosa          4.8         3.4          0.9        -0.4
## 2 versicolor          6.0         2.4          4.1         0.8
## 3  virginica          6.9         2.8          5.9         1.5
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-21" style="background:;">
  <hgroup>
    <h2>Programming: flow control</h2>
  </hgroup>
  <article>
    <p>The first rule of for loops is you do not write explicit for loops.</p>

<pre><code class="r">x = 0
for (i in 1:length(iris$Sepal.Length)) {
    x &lt;- x + iris$Sepal.Length[i]
}
x
</code></pre>

<pre><code>## [1] 876.5
</code></pre>

<p>The above works, but as is often the case it is better to do it the R way:</p>

<pre><code class="r">(x &lt;- sum(iris$Sepal.Length))
</code></pre>

<pre><code>## [1] 876.5
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-22" style="background:;">
  <hgroup>
    <h2>Programming: flow control</h2>
  </hgroup>
  <article>
    <p>The second rule of for loops is you DO NOT write explicit for loops.</p>

<pre><code class="r">iris$Sepal.Long &lt;- NA
for (i in 1:length(iris$Sepal.Length)) {
    if (iris$Sepal.Length[i] &gt; mean(iris$Sepal.Length)) {
        iris$Sepal.Long[i] &lt;- &quot;yes&quot;
    } else {
        iris$Sepal.Long[i] &lt;- &quot;no&quot;
    }
}
</code></pre>

<p>Seriously, avoid that. There are vectorized ways to do many things:</p>

<pre><code class="r">iris$Sepal.Long &lt;- ifelse(iris$Sepal.Length &gt; mean(iris$Sepal.Length),
                          &#39;yes&#39;, &#39;no&#39;)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-23" style="background:;">
  <hgroup>
    <h2>Programming: flow control</h2>
  </hgroup>
  <article>
    <p>Of course there are cases where you will want to use flow control, and you can use it:</p>

<pre><code class="r">for (i in 1:10) { print(i) }
i=0; while (i &lt; 10) { i &lt;- i + 1; print(i) }
i=0; repeat { i &lt;- i + 1; print(i); if (i == 10) { break }} # `next` is also available
# There is also a `switch` statment.
</code></pre>

<p>Be careful with if/else constructs especially if  you might have missing values. What happens here?</p>

<pre><code class="r">i &lt;- NA
if (i &gt; 3) {
    print(&quot;Big!&quot;)
} else if (i &lt; 3) {
    print(&quot;Small!&quot;)
} else {
    print(&quot;Three!&quot;)
}
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-24" style="background:;">
  <hgroup>
    <h2>Data set manipulation</h2>
  </hgroup>
  <article>
    <p>Bind columns with <code>cbind</code>:</p>

<pre><code class="r">colors &lt;- cbind(data.frame(Species=c(&#39;setosa&#39;, &#39;versicolor&#39;)),
                data.frame(Color=c(&#39;pink&#39;, &#39;orange&#39;)))
</code></pre>

<p>Bind rows with <code>rbind</code>:</p>

<pre><code class="r">colors &lt;- rbind(colors,
                data.frame(Species=&#39;virginica&#39;, Color=&#39;purple&#39;))
colors
</code></pre>

<pre><code>##      Species  Color
## 1     setosa   pink
## 2 versicolor orange
## 3  virginica purple
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-25" style="background:;">
  <hgroup>
    <h2>Data set manipulation</h2>
  </hgroup>
  <article>
    <p>Merging with <code>merge</code> is easy and fun. It merges on common column names and does a natural (inner) join by default. See <code>?merge</code> for all the details.</p>

<pre><code class="r">iris &lt;- merge(iris, colors)
iris[sample(nrow(iris), 6),]
</code></pre>

<pre><code>##        Species Sepal.Length Sepal.Width Petal.Length Petal.Width  Color
## 138  virginica          6.4         3.1          5.5         1.8 purple
## 140  virginica          6.9         3.1          5.4         2.1 purple
## 43      setosa          4.4         3.2          1.3         0.2   pink
## 123  virginica          7.7         2.8          6.7         2.0 purple
## 94  versicolor          5.0         2.3          3.3         1.0 orange
## 76  versicolor          6.6         3.0          4.4         1.4 orange
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-26" style="background:;">
  <hgroup>
    <h2>Data set manipulation</h2>
  </hgroup>
  <article>
    <p>Going from long to wide is easy with the <code>reshape</code> package:</p>

<pre><code class="r">library(reshape)
iris$Year &lt;- rep(1951:2000, 3)  # Imagine longitudinal flowers. Imagine.
head(iris)
</code></pre>

<pre><code>##   Species Sepal.Length Sepal.Width Petal.Length Petal.Width Color Year
## 1  setosa          5.1         3.5          1.4         0.2  pink 1951
## 2  setosa          4.9         3.0          1.4         0.2  pink 1952
## 3  setosa          4.7         3.2          1.3         0.2  pink 1953
## 4  setosa          4.6         3.1          1.5         0.2  pink 1954
## 5  setosa          5.0         3.6          1.4         0.2  pink 1955
## 6  setosa          5.4         3.9          1.7         0.4  pink 1956
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-27" style="background:;">
  <hgroup>
    <h2>Data set manipulation</h2>
  </hgroup>
  <article>
    <p>Going from wide to long with <code>melt</code>:</p>

<pre><code class="r">head(molten &lt;- melt(iris, id = c(&quot;Species&quot;, &quot;Year&quot;)))
</code></pre>

<pre><code>##   Species Year     variable value
## 1  setosa 1951 Sepal.Length   5.1
## 2  setosa 1952 Sepal.Length   4.9
## 3  setosa 1953 Sepal.Length   4.7
## 4  setosa 1954 Sepal.Length   4.6
## 5  setosa 1955 Sepal.Length     5
## 6  setosa 1956 Sepal.Length   5.4
</code></pre>

<p>The column names <code>variable</code> and <code>value</code> are just defaults.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-28" style="background:;">
  <hgroup>
    <h2>Data set manipulation</h2>
  </hgroup>
  <article>
    <p>Going from long to wide with <code>cast</code>:</p>

<pre><code class="r">head(cast(molten))
</code></pre>

<pre><code>##   Species Year Sepal.Length Sepal.Width Petal.Length Petal.Width Color
## 1  setosa 1951          5.1         3.5          1.4         0.2  pink
## 2  setosa 1952          4.9           3          1.4         0.2  pink
## 3  setosa 1953          4.7         3.2          1.3         0.2  pink
## 4  setosa 1954          4.6         3.1          1.5         0.2  pink
## 5  setosa 1955            5         3.6          1.4         0.2  pink
## 6  setosa 1956          5.4         3.9          1.7         0.4  pink
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-29" style="background:;">
  <hgroup>
    <h2>Munging strings, dates, etc.</h2>
  </hgroup>
  <article>
    <p>Suppose we want to abbreviate the species names:</p>

<pre><code class="r">iris$Species_short &lt;- substr(iris$Species, 1, 4)  #  &#39;sub-string&#39;
table(iris$Species_short)
</code></pre>

<pre><code>## 
## seto vers virg 
##   50   50   50
</code></pre>

<p>Also sometimes useful: <code>toupper</code>, <code>tolower</code>, <code>strsplit</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-30" style="background:;">
  <hgroup>
    <h2>Munging strings, dates, etc.</h2>
  </hgroup>
  <article>
    <p>Or remove vowels from the color names:</p>

<pre><code class="r">iris$Clr &lt;- gsub(&quot;[aeiou]&quot;, &quot;&quot;, iris$Color)  # more commonly used for white-space removal
table(iris$Clr)
</code></pre>

<pre><code>## 
##  pnk prpl  rng 
##   50   50   50
</code></pre>

<p>There is solid support for regular expressions and of course <code>grep</code>. See <code>?regex</code> and <code>?grep</code>.</p>

<pre><code class="r">grep(&quot;Length&quot;, names(iris), value = TRUE)
</code></pre>

<pre><code>## [1] &quot;Sepal.Length&quot; &quot;Petal.Length&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-31" style="background:;">
  <hgroup>
    <h2>Munging strings, dates, etc.</h2>
  </hgroup>
  <article>
    <p>Right now <code>Year</code> is an integer.</p>

<pre><code class="r">str(iris$Year)
</code></pre>

<pre><code>##  int [1:150] 1951 1952 1953 1954 1955 1956 1957 1958 1959 1960 ...
</code></pre>

<p>Let&#39;s change it into a date. First, we make it into a character string.</p>

<pre><code class="r">iris$Date &lt;- as.character(iris$Year)
str(iris$Date)
</code></pre>

<pre><code>##  chr [1:150] &quot;1951&quot; &quot;1952&quot; &quot;1953&quot; &quot;1954&quot; &quot;1955&quot; &quot;1956&quot; ...
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-32" style="background:;">
  <hgroup>
    <h2>Munging strings, dates, etc.</h2>
  </hgroup>
  <article>
    <p>Now we can make it into a date.</p>

<pre><code class="r">head(as.Date(iris$Date, format = &quot;%Y&quot;))
</code></pre>

<pre><code>## [1] &quot;1951-03-24&quot; &quot;1952-03-24&quot; &quot;1953-03-24&quot; &quot;1954-03-24&quot; &quot;1955-03-24&quot;
## [6] &quot;1956-03-24&quot;
</code></pre>

<p>By default it takes today&#39;s day and month. (For <code>format</code> details see <code>?strptime</code>.) Let&#39;s specify January 1st, by using <code>paste</code> to stick strings together.</p>

<pre><code class="r">head(paste(iris$Date, &quot;01&quot;, &quot;01&quot;, sep = &quot;-&quot;))
</code></pre>

<pre><code>## [1] &quot;1951-01-01&quot; &quot;1952-01-01&quot; &quot;1953-01-01&quot; &quot;1954-01-01&quot; &quot;1955-01-01&quot;
## [6] &quot;1956-01-01&quot;
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-33" style="background:;">
  <hgroup>
    <h2>Munging strings, dates, etc.</h2>
  </hgroup>
  <article>
    <p>Finally, we can make real dates:</p>

<pre><code class="r">iris$Date &lt;- as.Date(paste(iris$Date, &quot;01&quot;, &quot;01&quot;, sep = &quot;-&quot;))
str(iris$Date)
</code></pre>

<pre><code>##  Date[1:150], format: &quot;1951-01-01&quot; &quot;1952-01-01&quot; &quot;1953-01-01&quot; &quot;1954-01-01&quot; ...
</code></pre>

<p>Dates can be a big pain. See also the package <code>lubridate</code> if you have to deal with them a lot.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-34" style="background:;">
  <hgroup>
    <h2>SQL in R</h2>
  </hgroup>
  <article>
    <p>Structured Query Language (SQL) is very popular for working with data, especially when that data lives in a relational database.</p>

<p>There are two main ways that SQL can be used in R:</p>

<ul>
<li>R can act as a client of an external relational database and pull in data with SQL queries.</li>
<li>R can generate and use a relational database on the fly using data already in R, which can be convenient and sometimes more performant.</li>
</ul>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-35" style="background:;">
  <hgroup>
    <h2>SQL in R</h2>
  </hgroup>
  <article>
    <p>R can act as a client of an external relational database and pull in data with SQL queries.</p>

<p>This example connects to a Microsoft SQL Server database and pulls some data in from it.</p>

<pre><code class="r">library(RODBC)
db27 &lt;- odbcDriverConnect(&quot;driver={SQL Server};server=mtsqlvs27\\mtsqlins27;trusted_connection=true&quot;)
results &lt;- sqlQuery(db27, &quot;select * from spr_int.prl.raw_register_audit where year = 2012&quot;)
</code></pre>

<p>The particular library and/or connect string will vary depending on the database you&#39;re connecting to.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-36" style="background:;">
  <hgroup>
    <h2>SQL in R</h2>
  </hgroup>
  <article>
    <p>R can generate and use a relational database on the fly using data already in R, which can be convenient and sometimes more performant.</p>

<pre><code class="r">library(sqldf)
results &lt;- sqldf(&quot;select Species, Date from iris where Petal_Length &gt; 2 limit 6&quot;)
</code></pre>

<p>SQL is a well-known and fairly powerful language for data manipulation. Some people will find it easier to use SQL selects and joins than native R equivalents for working with data.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-37" style="background:;">
  <hgroup>
    <h2>2-D plotting: base graphics</h2>
  </hgroup>
  <article>
    <p>Without loading any packages, you can make graphics like this. There are a range of plotting functions, but many of the argument names are consistent across them.</p>

<pre><code class="r">plot(Sepal.Length ~ Sepal.Width,
     col = Color,
     data = iris,
     xlab = &quot;Sepal Width, centimeters&quot;,
     ylab = &quot;Sepal Length, centimeters&quot;,
     main = &quot;Sepal Measurements for 150 Irises&quot;,
     pch = 19,
     cex = 0.8,
     xlim = c(1, 6),
     ylim = c(4, 9))
legend(&quot;topright&quot;, legend = colors$Species, col = colors$Color, pch = 19)
</code></pre>

<p>More base graphics functions: <code>hist</code>, <code>boxplot</code>, <code>pairs</code>, <code>barplot</code>, <code>points</code>, <code>lines</code>, <code>text</code>, <code>polygon</code>. The <code>type</code> argument for <code>plot</code> is also good. To do multiple plots at once, use, e.g., <code>par(mfrow=c(2, 2))</code>.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-38" style="background:;">
  <hgroup>
    <h2>2-D plotting: <code>lattice</code></h2>
  </hgroup>
  <article>
    <p>Loading the <code>lattice</code> package, you can make graphics like this. Some of the options are similar to base graphics, and some are not.</p>

<pre><code class="r">xyplot(Sepal.Length ~ Sepal.Width,
       data = iris,
       xlab = &quot;Sepal Width, centimeters&quot;,
       ylab = &quot;Sepal Length, centimeters&quot;,
       main = &quot;Sepal Measurements for 150 Irises&quot;,
       xlim = c(1, 6),
       ylim = c(4, 9),
       groups = Species,
       par.settings = list(superpose.symbol = list(col = colors$Color,
                                                   pch = 19,
                                                   cex = 0.8)),
       auto.key = list(corner=c(1, 1)))
</code></pre>

<p>More <code>lattice</code> functions: <code>histogram</code>, <code>bwplot</code>, <code>splom</code>, <code>barchart</code>. To do multiple plots at once, usually you want a <code>|</code> conditional in your plotting formula to get small multiples.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-39" style="background:;">
  <hgroup>
    <h2>2-D plotting: <code>ggplot2</code></h2>
  </hgroup>
  <article>
    <p>Loading the <code>ggplot2</code> package, you can make graphics like this. Syntax is quite different from base graphics and <code>lattice</code>. It&#39;s based on <a href="http://www.amazon.com/Grammar-Graphics-Statistics-Computing/dp/0387245448">The Grammar of Graphics</a>.</p>

<pre><code class="r">g &lt;- ggplot(data = iris, aes(x = Sepal.Width,
                             y = Sepal.Length,
                             colour = Species))
g &lt;- g + geom_point()  # Many more; see http://docs.ggplot2.org/current/index.html
g &lt;- g + theme_bw()    # I happen to prefer this theme.
g &lt;- g + labs(title = &quot;Sepal Measurements for 150 Irises&quot;)
g &lt;- g + scale_x_continuous(name = &quot;Sepal Width, centimeters&quot;,
                            limits = c(1, 6))
g &lt;- g + scale_y_continuous(name = &quot;Sepal Length, centimeters&quot;,
                            limits = c(4, 9))
g &lt;- g + scale_color_manual(values = colors$Color)
g &lt;- g + theme(legend.position=c(0.8, 0.8))
g
</code></pre>

<p>The <code>qplot</code> function is also available for quick plots using syntax more similar to base graphics.</p>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-40" style="background:;">
  <hgroup>
    <h2>Network (graph) visualization</h2>
  </hgroup>
  <article>
    <p>This is popular lately. I describe it on my <a href="http://planspace.org/2013/01/30/visualize-co_occurrence/">blog</a>.</p>

<pre><code class="r">data &lt;- read.table(header = T, row.names = 1, text = &quot;    the fat cat\none   1   1   0\ntwo   1   0   1\nthree 1   2   1&quot;)

total_occurrences &lt;- colSums(data)
data_matrix &lt;- as.matrix(data)

co_occurrence &lt;- t(data_matrix) %*% data_matrix

library(igraph)
graph &lt;- graph.adjacency(co_occurrence, weighted = TRUE, mode = &quot;undirected&quot;, 
    diag = FALSE)

plot(graph, vertex.label = names(data), vertex.size = total_occurrences * 18, 
    edge.width = E(graph)$weight * 8)

tkplot(graph, vertex.label = names(data), vertex.size = total_occurrences * 
    18, edge.width = E(graph)$weight * 8)
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-41" style="background:;">
  <hgroup>
    <h2>PCA / clustering / 3-D plotting</h2>
  </hgroup>
  <article>
    <p>This is also fun and described on my <a href="http://planspace.org/2013/02/03/pca-3d-visualization-and-clustering-in-r/">blog</a>.</p>

<pre><code class="r">Iris &lt;- iris
data(iris)
iris$Species &lt;- factor(iris$Species, levels = c(&quot;versicolor&quot;, &quot;virginica&quot;, &quot;setosa&quot;))

round(cor(iris[, 1:4]), 2)

pc &lt;- princomp(iris[, 1:4], cor = TRUE, scores = TRUE)

summary(pc)

# scree plot
plot(pc, type = &quot;lines&quot;)

biplot(pc)

library(rgl)
plot3d(pc$scores[, 1:3], col = iris$Species)

text3d(pc$scores[, 1:3], texts = rownames(iris))
text3d(pc$loadings[, 1:3], texts = rownames(pc$loadings), col = &quot;red&quot;)
coords &lt;- NULL
for (i in 1:nrow(pc$loadings)) {
    coords &lt;- rbind(coords, rbind(c(0, 0, 0), pc$loadings[i, 1:3]))
}
lines3d(coords, col = &quot;red&quot;, lwd = 4)

set.seed(42)
cl &lt;- kmeans(iris[, 1:4], 3)
iris$cluster &lt;- as.factor(cl$cluster)

plot3d(pc$scores[, 1:3], col = iris$cluster, main = &quot;k-means clusters&quot;)
plot3d(pc$scores[, 1:3], col = iris$Species, main = &quot;actual species&quot;)

with(iris, table(cluster, Species))

di &lt;- dist(iris[, 1:4], method = &quot;euclidean&quot;)
tree &lt;- hclust(di, method = &quot;ward&quot;)
iris$hcluster &lt;- as.factor((cutree(tree, k = 3) - 2)%%3 + 1)
# that modulo business just makes the coming table look nicer
plot(tree, xlab = &quot;&quot;)
rect.hclust(tree, k = 3, border = &quot;red&quot;)

with(iris, table(hcluster, Species))
</code></pre>

  </article>
  <!-- Presenter Notes -->
</slide>

      <slide class="" id="slide-42" style="background:;">
  <hgroup>
    <h2>Thank you! Questions! Survey!</h2>
  </hgroup>
  <article>
    <p><center></p>

<h3><a href="http://bit.ly/http://bit.ly/NYUtopicRsurvey">http://bit.ly/NYUtopicRsurvey</a></h3>

<p></center></p>

  </article>
  <!-- Presenter Notes -->
</slide>

    <slide class="backdrop"></slide>
  </slides>

  <!--[if IE]>
    <script 
      src="http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js">  
    </script>
    <script>CFInstall.check({mode: 'overlay'});</script>
  <![endif]-->
</body>
<!-- Grab CDN jQuery, fall back to local if offline -->
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js"></script>
<script>window.jQuery || document.write('<script src="libraries/widgets/quiz/js/jquery-1.7.min.js"><\/script>')</script>
<!-- Load Javascripts for Widgets -->
<!-- LOAD HIGHLIGHTER JS FILES -->
<script src="libraries/highlighters/highlight.js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<!-- DONE LOADING HIGHLIGHTER JS FILES -->
</html>